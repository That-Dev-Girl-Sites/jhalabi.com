<!DOCTYPE html>
<html lang="en">

<head>
  <title>
    Overriding WordPress core: Dynamic blocks edition | Joni Halabi</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=PT+Mono&display=swap" rel="stylesheet">

  <link rel="stylesheet" type="text/css" href="/css/styles.css">

  <meta name="description" content="Joni Halabi is a web developer, author of Sweet Little You, and conference speaker who writes technical articles, as well as creative works that focus on life as a single mother by choice.">
  <meta name="keywords" content="web developer, wordpress, author, writer, speaker, instructor, teacher, gutenberg, javascript, sweet little you, kid lit, single mother by choice, donor conceived">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="utf-8">

  <meta property="og:title" content="Overriding WordPress core: Dynamic blocks edition">
  <meta property="og:url" content="//jhalabi.com//blog/2022/02/core-dynamic-render-override/">
  <meta property="og:description" content="I was recently given the task of making the WordPress core RSS block look exactly like one of our custom blocks posts block.">

  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="/assets/icons/site.webmanifest">
  <link rel="mask-icon" href="/assets/icons/safari-pinned-tab.svg" color="#b26e63">
  <link rel="shortcut icon" href="/assets/icons/favicon.ico">
  <meta name="msapplication-TileColor" content="#222222">
  <meta name="msapplication-config" content="/assets/icons/browserconfig.xml">
  <meta name="theme-color" content="#222222">
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-LMXWQM7X1W"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-LMXWQM7X1W');
  </script>
</head>



<body>
  <nav aria-label="Skip link">
    <a href="#main" class="skip-link">Skip to content</a>
  </nav>

  <header class="site-header">
    
      <p class="nameplate">
        <a href="/">Joni Halabi</a>
      </p>
    

    <p class="tagline">
      website creator, author, speaker, single mom, runner, music lover, chatty introvert
    </p>

    <nav class="nav-primary" aria-label="Main">
      <ul>
        <li ><a href="/" aria-label="Home">..</a></li>
        <li ><a href="/book/"     >Book</a></li>
        <li class="current"><a href="/blog/"     >Blog</a></li>
        <li ><a href="/speaking/" >Speaking</a></li>
        <li ><a href="/coding/"   >Coding</a></li>
        <li ><a href="/contact/"  >Contact</a></li>
      </ul>
    </nav>
  </header>

<main id="main">

  <div class="post-meta">
    <p class="categories">
      
        
      
        
          <a href="/blog/development/" class="category development">development</a>
        
      
        
          <a href="/blog/wordpress/" class="category wordpress">wordpress</a>
        
      
    </p>

    <h1 id="post-title">Overriding WordPress core: Dynamic blocks edition</h1>

    <p class="date">
      07 February 2022
    </p>
  </div>

  <article class="post-article" aria-labelledby="post-title">
    <p>I was recently given the task of making the WordPress core RSS block look exactly like one of our custom blocks posts block. That custom block displays a series of news stories. RSS feeds are series of news stories, so this request totally makes sense.</p>
<p>Originally, I assumed the task would be a long process of copying and pasting CSS rules from our posts block to classes that match up to the RSS block. That sounded <em>awful</em>. Sorry, CSS folks, but CSS is not exactly my happy place.</p>
<p>I couldn't help but think, could there be a better way? So, I decided to look for one.</p>
<h2>An obvious question</h2>
<p>My first thought was to see if I can just rewrite the core block's render function to my own HTML (and, more importantly, the CSS classes) to more closely mimic the markup of our custom posts block.</p>
<p>After checking out the <a href="https://github.com/WordPress/gutenberg/blob/trunk/packages/block-library/src/rss/index.php">block's PHP code</a>, I wondered if I could simply redeclare the <code>render_block_core_rss()</code> function. Spoiler alert: PHP did not like that one bit. Unsurprising, but I thought it would be nice.</p>
<h2>The better way was oddly easy</h2>
<p>I needed to find a way to point the core block to a different render function. The only way to assign a render function to a block is upon registration. The block is already registered.</p>
<p>But... <em>[Joni puts on her black hat for a moment]</em> I can unregister and then re-register the block!</p>
<p>So, that's exactly what I did:</p>
<pre><code class="language-php">function reregister_block_core_rss() {
  unregister_block_type( 'core/rss' );

  register_block_type_from_metadata(
    ABSPATH . '/wp-includes/blocks/rss',
    array(
      'render_callback' =&gt; 'rerender_block_core_rss',
    )
  );
}

add_action( 'init', 'reregister_block_core_rss' );

function rerender_block_core_rss( $attributes ) {
  return '&lt;div&gt;Whatever I want goes here!&lt;/div&gt;';
}
</code></pre>
<h2>Further explanation</h2>
<p>In the above code, <code>rerender_block_core_rss()</code> takes the block <code>$attributes</code> as a parameter (just as the core render function does) and returns markup. The markup in my above example is obviously not real. This exercise was solely a proof of concept to see whether or not I <em>can</em> adjust the markup.</p>
<p>I also added a new <code>reregister_block_core_rss()</code> registration function. This function makes the assumption that the core registration block fires first. It unregisters the block, then reregisters it, using my custom render function.</p>
<p>The core block is conveniently <a href="https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/">registered via JSON</a> (a new feature I <em>love</em>, btw), so my new registration function needs to call that core <code>block.json</code> file. You can access the WordPress installation directory via the <code>ABSPATH</code> constant. The core block code lives in <code>/wp-includes/blocks</code>. Put those two together and we have a path to our core RSS block's JSON file.</p>
<p>One more note: this method <em>(obviously?)</em> only works for dynamic blocks <em>(e.g. blocks whose markup are rendered on the server-side)</em>.</p>
<hr>
<h2>Update</h2>
<p>There is a <a href="https://developer.wordpress.org/reference/hooks/register_block_type_args/"><code>register_block_type_args</code></a> hook that allows you to filter the registration arguments of a block. However, making changes to those arguments does not seem to be a part of that hook. In my testing, the original <code>render_callback</code> was still being used, so it looks like you would still need to register or reregister the block.</p>
<p>I tend to work almost exclusively with dynamic blocks these days, but if you have a need to overwrite the render function of a static block, the <a href="https://developer.wordpress.org/reference/hooks/render_block/"><code>render_block</code> hook</a> looks to be your best bet.</p>

  </article>

  <div class="post-share">
    Share this article: 

    <a class="ri-bluesky-fill" target="_blank" href="https://bsky.app/intent/compose?text=Check out “Overriding WordPress core: Dynamic blocks edition” by @jonihalabi.bsky.social https://jhalabi.com/blog/2022/02/core-dynamic-render-override/" rel="noreferrer noopener">
      <span class="sr-only">Bluesky</span>
    </a>

    <a class="ri-facebook-fill" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://jhalabi.com/blog/2022/02/core-dynamic-render-override/" rel="noreferrer noopener">
      <span class="sr-only">Facebook</span>
    </a>

    <a class="ri-linkedin-box-fill" target="_blank" href="https://www.linkedin.com/shareArticle?url=https://jhalabi.com/blog/2022/02/core-dynamic-render-override/" rel="noreferrer noopener">
      <span class="sr-only">LinkedIn</span>
    </a>

    <a class="ri-mastodon-fill" target="_blank" href="https://higheredweb.social/share?text=Check out “Overriding WordPress core: Dynamic blocks edition” by @jonihalabi@higheredweb.social https://jhalabi.com/blog/2022/02/core-dynamic-render-override/" rel="noreferrer noopener">
      <span class="sr-only">LinkedIn</span>
    </a>
  </div>

</main>

<footer>

    <div class="footer-top">
  
      <div class="footer-top-code">
        <p>const joni = {</p>
        <dl>
          <dt>"description":</dt>
          <dd>"Web developer, author, and conference speaker who writes technical articles, as well as creative works that focus on life as a single mother by choice.",</dd>
          <dt>"press_kit":</dt>
          <dd>"<a href="/press-kit/">Biographies, book information, and photos for public use</a>"</dd>
        </dl>
        <p>};</p>
      </div>
  
      <ul class="footer-top-socials">
        <li>
          <a href="/feed.xml" class="ri-rss-fill">Blog feed</a>
        </li>

        <li>
          <a href="https://bsky.app/profile/jonihalabi.bsky.social" class="ri-bluesky-fill">Bluesky</a>
        </li>
  
        <li>
          <a href="https://www.instagram.com/jonihalabi/" class="ri-instagram-fill">Instagram</a>
        </li>
  
        <li>
          <a href="https://www.linkedin.com/in/jonihalabi/" class="ri-linkedin-fill">LinkedIn</a>
        </li>
      </ul>
  
    </div>
  
  
  
    <div class="footer-copyright">
      <div>
        <p>
          Copyright &copy; 2025 Joni Halabi. All rights reserved.
  
          <span id="day-0">Happy Sunday! Today is French toast day in our house.</span>
          <span id="day-1">Whelp, it's Monday. Go ahead and have that extra cup of tea.</span>
          <span id="day-2">Happy "We survived Monday" day! Otherwise known as Tuesday.</span>
          <span id="day-3">Ah... Wednesday. So close, yet so far.</span>
          <span id="day-4">It's Thursday. Almost there!</span>
          <span id="day-5">Happy Friday. We made it!</span>
          <span id="day-6">It's the weekend. Hooray!</span>
        </p>
      </div>
    </div>
  </footer>
  
  <script>
    const d=new Date(); const n=d.getDay();document.getElementById('day-'+n).classList.add('show');
  </script>
  
</body>
</html>

